<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rock-Paper-Scissor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Anta&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Madimi+One&display=swap');

        :root {
            --color1: #fd3f00;
            --color2: #F4CE14;
            --color3: #ae00ff;
            --color4: #1eff00;
            --color5: #00f2ff;
        }
        * {
            padding: 0;
            margin: 0;
        }

        body {
            border: 2px solid black;
            overflow: hidden;
        }

        body.style1 {
            background-color: #333333;
            
        }

        body.style2 {
            border: 2px solid black;
            background-color: #333333;
            display: flex;
            justify-content: center;
            align-self: center;
            /* flex-wrap:wrap; */
            min-width: 100vw;
            min-height: 100vh;
            overflow: hidden;
            flex-direction: column;
        }

        div.optionContainer {
            margin: -30px 0px 0px 0px;
            height: 80vh;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            /* border: 2px solid pink; */
        }

        div.icon {
            width: 10rem;
            height: 10rem;
            display: block;
            cursor: pointer;
        }
        div.iconResult {
            width: 10rem;
            height: 10rem;
            border-radius: 50%;
        }
        div#rock {
            background-color: red;
        }

        div#paper {
            background-color: rgb(0, 102, 255);
        } 
        
        div#scissor {
            background-color: rgb(0, 255, 0);
        }

        div#rock, div#paper, div#scissor {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 100px;
            
        }

        @keyframes resultDisplay {
            from {
                opacity: 0;
                position: relative;
                top: 0px;
            }
            to {
                opacity: 1;
            }
        }

        i, div.icon {
            border-radius: 100%;
        }

        h1 {
            width: 100%;
            text-align: center;
            /* background-color: rgb(0, 183, 255); */
            background-color: var(--color2);
            padding: 10px 0px 10px 0px;
        }

        h1.result {
            position: relative;
            top: 0px;
        }

        h2 {
            display: flex;
            justify-content: center;
            padding: 10px 0px 10px 0px;
            /* background-color: rgb(0, 255, 251); */
            background-color: black;
            color: white;
            position: relative;
        }

        div.option-text {
            text-align: center;
            color: white;
            font-size: 20px;
            text-transform: uppercase;
        }

        i.optionIcon:hover {
            font-size: 110px;
            transition-duration: 0.5s;
        }

        .resultContainer {
            max-width: 1000px;
            min-width: 600px;
            margin: auto 0px auto 0px;
            display: flex;
            position: relative;
            left: 50%;
            transform: translateX(-50%);
            flex-direction: column;
            text-align: center;
            animation: resultDisplay 2s linear 0s 1 normal forwards;
            /* animation-fill-mode: ; */
        }

        div.choices, div.optionResultContainer {
            display: flex;
        }
        div.resultText {
            /* background-color: aqua; */
            font-family: cursive;
            font-size: 38px;
            font-weight: 800;
            border: 2px solid orange;
            background-color: var(--color3);
            color: white;
        }
        div.choiceText {
            font-family: monospace;
            font-size: 32px;
            font-weight: 800;
            border: 2px solid salmon;
            width: 100%;
            text-align: center;
        }

        div.choices {
            background-color: #00ff73;
            width: 100%;
        }

        div.optionResultContainer {
            width: 100%;
        }

        div.optionResult {
            border: 3px solid rgb(255, 196, 0);
            width: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 0px 10px 0px;
        }
        div.winnerText {
            border: 2px solid burlywood;
            font-size: 29px;
            font-weight: 800;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            background-color: var(--color5);
        }
        div#replayHistory {
            font-size: 40px;
            display: flex;
            justify-content: space-around;
            /* border: 3px solid var(--color4); */
        }
        div#replay, 
        div#record {
            border: 3px solid var(--color4);
            width: 100%;
            padding: 10px 0px 10px 0px;
            background-color: white;
        }

        div#replay:hover,
        div#record:hover {
            background-color: black;
            color: white;
            cursor: pointer;
        }
        div#recordPage {
            padding: 60px 0px 0px 0px;
            background-color: white;
            width: calc(80vw);
            height: calc(60vh);
            box-shadow: 8px 8px 15px white;
            border-radius: 30px;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            animation: opacityChange 0.7s linear 0s 1 normal forwards;
        }
        div#closeButton {
            font-size: 25px;
            position: absolute;
            right: 25px;
            top: 20px;
        }
        div#closeButton:hover {
            color: red;
            cursor: pointer;
        }


        @keyframes opacityChange {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* Pause Menu */

        div#pauseMenu {
            width: 80vw;
            max-width: 1000px;
            height: 60vh;
            background-color: #ffd500;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            border-radius: 30px;
            box-shadow: 20px 20px 40px #ffd500;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            align-items: center;
            animation: opacityChange 0.7s linear 0s 1 normal forwards;
        }

        div#playIcon {
            font-size: 40px;
            cursor: pointer;
        }

        div#playIcon:hover {
            animation-name: rotate;
            animation-duration: 0.5s;
            animation-timing-function: cubic-bezier(0.9, 0.001, 0.1, 0.5);
        }

        div#pauseIcon {
            position: relative;
            left: calc(100vw - 100px);
            font-size: 40px;
            width: 50px;
            border: 5px solid black;
            background-color: white;
            text-align: center;
            margin: 20px 20px 0px 0px;
        }

        div#pauseIcon:hover {
            cursor: pointer;
            /* font-size: 45px; */
            transition-duration: 0.5s;
            color: white;
            background-color: black;
        }

        div#soundIcon {
            font-size: 40px;
            /* width: 480px; */
            /* background-color: #00f2ff; */
            /* padding: 0px 5px 0px 5px; */
        }
        div#sfxIcon {
            /* width: 480px; */
            font-size: 39px;
            /* background-color: #00f2ff; */
        }
        input#musicSlider, 
        input#sfxSlider {
            accent-color: black;
            width: 40vw;
            max-width: 300px;
            cursor: grab;
        }
        input#musicSlider:active,
        input#sfxSlider:active {
            cursor: grabbing;
        }
        div#veil {
            position: absolute;
            top: 0px;
            left: 0px;
            width: 100vw;
            height: 100vh;
            background-color: black;
            
            z-index: 1;
        }
        div#veil > p {
            color: white;
            font-size: 24px;
            font-family: monospace;
            text-align: center;
            margin: 30px 0px 0px 0px;
        }
        p#music, p#sfx {
            display: inline-block;
            font-family: "Madimi One", sans-serif;
            font-weight: 400;
            font-style: normal;
            /* margin: 0px 20px 0px 20px; */
            /* background-color: red; */
            min-width: 130px;
        }
        p#sfx, p#music {
            margin: 0px 0px 0px 5px;
        }
        i#sfxID {
            width: 40px; /* Both icon width are different */
        }
        i#sfxID:hover, i#musicID {
            cursor: pointer;
        }
        div#play {
            display: flex;
            font-size: 24px;
            font-family: "Madimi One", sans-serif;
            font-weight: 400;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1;
            width: 300px;
            background-color: greenyellow;
            border-radius: 10px;
            /* background-color: red; */
        }

        div#play:hover {
            background: radial-gradient(var(--color2) 10%, var(--color4));
            box-shadow: 0px 0px 30px greenyellow;
        }

        .resumeTextAnimation {
            animation-name: resumeTextAnimation;
            animation-duration: 0.5s;
            animation-fill-mode: forwards;
        }

        .playIconAnimation {
            animation-name: rotate;
            animation-duration: 0.5s;
            animation-timing-function: cubic-bezier(0.9, 0.001, 0.1, 0.5);
        }
        p#resumeText {
            font-size: 30px;
            margin: 0px 0px 0px 10px;
        }

        div.record#record {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 10px 0px 10px 0px;
            border: 3px solid var(--color4);
            font-family: cursive;
            font-size: 24px;
            
        }

        div.record#record > p {
            height: 100%;
        }
        

        /* Animation */

        @keyframes rotate {
            from  {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes resumeTextAnimation {
            0% {
                opacity: 0.6;
            }
            50% {
                letter-spacing: 2px;
            }
            100% {
                opacity: 3px;
                letter-spacing: 3px;
            }
        }

        

    </style>
</head>

<body class="style1">
    <div id="veil">
        <p>Click! anything in the Screen to --&gtSTART&lt--</p>
    </div>
    <h1 id="heading">Rock-Paper-Scissor</h1>
    <h2 id="instruction">Choose any one of the following:</h2>
    <div id="pauseIcon">
        <i class="fa-solid fa-pause"></i>
    </div>
    <div class="optionContainer" id="optionContainer">
        
        
        <div class="option">
            <div id="rock" class="icon">
                <i class="fa-regular fa-hand-back-fist optionIcon"></i>
            </div>
            <div class="option-text">ROCK</div>
        </div>
        
        <div class="option">
            <div id="paper" class="icon">
                <i class="fa-regular fa-hand optionIcon"></i>
            </div>
            <div class="option-text">PAPER</div>
        </div>
        <div class="option">

            <div id="scissor" class="icon">
                <i class="fa-regular fa-hand-scissors optionIcon"></i>
            </div>
            <div class="option-text">SCISSOR</div>
        </div>
        
    </div>

    <div class="resultContainer" id="resultContainer">
        <div class="resultText">RESULT:</div>
        <div class="choices">
            <div class="choiceText">Player chose:</div>
            <div class="choiceText">Computer chose:</div>
        </div>
        
        <div class="optionResultContainer">
            <div class="optionResult" id="optionResult1">

            </div>
            
            <div class="optionResult" id="optionResult2">
                
            </div>
        </div>
        <div class="winnerText" id="winner-Text">Winner: </div>
        <div id="replayHistory">
            <div id="replay"><i class="fa-solid fa-rotate-right"></i></div>
            <div id="record"><i class="fa-solid fa-clock"></i></div>
        </div>
        
    </div>
    <div id="recordPage">
        <div id="closeButton">
            <i class="fa-solid fa-circle-xmark"></i>
        </div>     
    </div>

    <div id="pauseMenu">
        <div id="play">
            <div id="playIcon">
                <i class="fa-solid fa-play"></i>
            </div>
            <p id="resumeText">Resume</p>
        </div>
        
        <div id="soundIcon">
            <i class="fa-solid fa-music" id="musicID"></i>
            <p id="music">Music:</p>
            <input type="range" id="musicSlider" min="0" max="1" step="0.1" value="0.4">
        </div>
        <div id="sfxIcon">
            <i class="fa-solid fa-volume-high" id="sfxID"></i>
            <p id="sfx">SFX:</p>
            <input type="range" id="sfxSlider" min="0" max="1" step="0.1" value="0.4">
        </div>
    </div>

    <!-- Audio -->

    <audio id="clickSound">
        <source src="Resource/clickSound.mp3">
    </audio>
    <audio id="gameMusic">
        <source src="Resource/gameMusic.mp3">
    </audio>

    <script>
        

        // Compulsory Excecution in beginning

        
        let execute = 0;
        document.body.addEventListener("click", () => {
            if (execute == 0) {
                document.body.removeChild(veil);
                playGameMusic();
            }
            execute = 1;
        })
        

        //
        const mouse = {x : 0, y : 0};
        
        const veil = document.getElementById("veil");
        const optionLayout = document.getElementById("optionContainer");
        const resultLayout = document.getElementById("resultContainer");
        const recordPage = document.getElementById("recordPage");
        document.body.removeChild(resultLayout);
        document.body.removeChild(recordPage);
        const rockButton = document.getElementById("rock");
        const paperButton = document.getElementById("paper");
        const scissorButton = document.getElementById("scissor");
        const h1 = document.getElementById("heading");
        const h2 = document.getElementById("instruction");

        const clickSound = document.getElementById("clickSound");
        const pauseButton = document.getElementById("pauseIcon");
        const playButtonSection = document.getElementById("play");
        const playButton = document.getElementById("playIcon");
        const resumeText = document.getElementById("resumeText");
        const pauseMenu = document.getElementById("pauseMenu");
        const musicIcon = document.getElementById("musicID");
        const sfxIcon = document.getElementById("sfxID");

        //temp
            // const x = document.getElementById("optionContainer");
            // document.body.removeChild(x);
            // document.body.removeChild(veil);
            // document.body.appendChild(pauseMenu);
        //temp

        removePauseMenu();
        
        let scoreCardArray = [];
        let playerScore = 0, computerScore = 0, drawScore = 0;
        
        // let startCondition = 0;
        let userInput = "", computerInput = "";

        let playerCircle, computerCircle;
        rockButton.addEventListener("click", () => {
            playClickSound();
            userInput = "rock";
            rockPaperScissorLogic(userInput);
        });
        paperButton.addEventListener("click", () => {
            playClickSound();
            userInput = "paper";
            rockPaperScissorLogic(userInput);
        });
        scissorButton.addEventListener("click", () => {
            playClickSound();
            userInput = "scissor";
            rockPaperScissorLogic(userInput);
        });
        pauseButton.addEventListener("click", () => {
            playClickSound();
            addPauseMenu();
            var musicSlider = document.getElementById("musicSlider");
            var sfxSlider = document.getElementById("sfxSlider");
            musicSlider.addEventListener("input", () => {
                gameMusic.volume = musicSlider.value;
            });
            sfxSlider.addEventListener("input", () => {
                clickSound.volume = sfxSlider.value;
            });
        });
        playButtonSection.addEventListener("click", () => {
            playClickSound();
            removePauseMenu();
        });
        playButtonSection.addEventListener("mouseover", () => {
            // alert("hi");
            // play = document.getElementById("play");
            // var x = document.createElement("p");
            // x.textContent = "Resume";
            // play.appendChild(x);
            // animation-name: playButtonSectionAnimation;
            // animation-duration: 5s;
            // playButtonSection.style["background-color"] = "red";
            // playButtonSection.classList.add("playButtonSectionAnimation");
            playButton.classList.add("playIconAnimation");
            resumeText.classList.add("resumeTextAnimation");
        }); 
        playButtonSection.addEventListener("mouseout", () => {
            playButton.classList.remove("playIconAnimation");
            resumeText.classList.remove("resumeTextAnimation");
        });
        musicIcon.addEventListener("click", () => {
            playClickSound();
            musicVolumeChange();
        });
        sfxIcon.addEventListener("click", () => {
            playClickSound();
            sfxVolumeChange();
        });

        
        function randomComputerInput() {
            let randomNumber = Math.random() * 3; // from 0 to 3
            if (randomNumber >= 0 && randomNumber < 1) {
                computerInput = "rock";
            }
            else if (randomNumber >= 1 && randomNumber < 2) {
                computerInput = "paper";
            }
            else if (randomNumber >= 2 && randomNumber <= 3) {
                computerInput = "scissor"
            }
            return computerInput;
        }
        function rockPaperScissorLogic(userInput) {

            
            
            let winner = "", loser = "", drawCheck = 0;
            computerInput = randomComputerInput();

            playerCircle = document.getElementById(userInput);
            computerCircle = document.getElementById(computerInput);

            if (userInput == "rock") {
                if (computerInput == "rock") {
                    drawCheck = 1;
                }
                else if (computerInput == "paper") {
                    winner = "Computer";
                    loser = "Player";
                }
                else if (computerInput == "scissor") {
                    winner = "Player";
                    loser = "Computer";
                }
            }
            else if (userInput == "paper") {
                if (computerInput == "rock") {
                    winner = "Player";
                    loser = "Computer";
                }
                else if (computerInput == "paper") {
                    drawCheck = 1;
                }
                else if (computerInput == "scissor") {
                    winner = "Computer";
                    loser = "Player";
                }
            }
            else if (userInput == "scissor") {
                if (computerInput == "rock") {
                    winner = "Computer";
                    loser = "Player";
                }
                else if (computerInput == "paper") {
                    winner = "Player";
                    loser = "Computer";
                }
                else if (computerInput == "scissor") {
                    drawCheck = 1;
                }
            }

            scoreCard(userInput, computerInput, winner);  // initialize scoreCard
            calculateScore(scoreCardArray);
            console.log(scoreCardArray);
            console.log(playerScore, computerScore, drawScore);

            playerScore = computerScore = drawScore = 0;  // resetting the point
            
            styleClassChange(playerCircle, userInput, computerCircle);
            const replay = document.getElementById("replay");
            replay.addEventListener("click", reset);
            const history = document.getElementById("record");
            history.addEventListener("click", record);

            // Last Result Text
            const winnerText = document.getElementById("winner-Text");
            if (drawCheck == 1) {
                winnerText.innerHTML = "DRAW";
            }
            else {
                winnerText.innerHTML = "Winner: " + winner;
            }
        }

        

        function styleClassChange(playerCircle, userInput, computerCircle) {
            h1.classList.add("result");
            document.body.classList.remove("style1");
            document.body.classList.add("style2");
            let removalTag2 = document.getElementById("optionContainer");
            
            document.body.removeChild(h2);
            document.body.removeChild(removalTag2);
            pauseButton.after(resultLayout)
            // document.body.insertBefore(resultLayout, document.body.childNodes[2]);

            let side1 = document.getElementById("optionResult1");
            let clone1 = playerCircle.cloneNode(true);
            clone1.setAttribute("class", "iconResult");
            side1.appendChild(clone1);
            var temp = document.createElement("div");
            side1.appendChild(temp);
            temp.setAttribute("class", "option-text");
            temp.innerHTML = userInput;

            

            let side2 = document.getElementById("optionResult2");
            // computerCircle.setAttribute("class", "iconResult");
            let clone2 = computerCircle.cloneNode(true);
            clone2.setAttribute("class", "iconResult");
            side2.appendChild(clone2);
            var temp2 = document.createElement("div");
            side2.appendChild(temp2);
            temp2.setAttribute("class", "option-text");
            temp2.innerHTML = computerInput;

            rockButton.removeEventListener("click", null);
            paperButton.removeEventListener("click", null);
            scissorButton.removeEventListener("click", null);
        }
        
        
        // let removalTag3 = document.getElementById("resultContainer");
        
        // document.body.removeChild(removalTag3);


        // future work


        


        function reset() {
            playClickSound();
            let side1 = document.getElementById("optionResult1");
            let side2 = document.getElementById("optionResult2");
            side1.innerHTML = "";
            side2.innerHTML = "";
            document.body.removeChild(resultLayout);
            
            // document.body.insertBefore(h2, document.body.childNodes[1]);
            
            document.body.classList.remove("style2");
            document.body.classList.add("style1");
            document.body.insertBefore(h2, document.body.childNodes[3]);
            document.body.appendChild(optionLayout);

        }


        //

        

        function record() {
            // alert("hi");
            playClickSound();
            document.body.appendChild(recordPage);
            // clear recordPage

            for (let i = 0; i < recordPage.children.length; i++) {
                if (i != 0) recordPage.removeChild(recordPage.children[i]);
            }

            let closeButton = document.getElementById("closeButton");

            for (let i = 0; i < scoreCardArray.length; i++) {
                currentScoreCard = scoreCardArray[i];
                var x = document.createElement("div");
                x.id = "record";
                x.classList.add("record");
                x.innerHTML = "<p>Player: " + currentScoreCard["Player"] + "</p><p>Computer: " + currentScoreCard["Computer"] + "</p><p>Winner: " + currentScoreCard["Winner"] + "</p>"; 
                recordPage.appendChild(x);
            }

            

            closeButton.addEventListener("click", () => {
                playClickSound();
                document.body.removeChild(recordPage);
            })
        }


        function scoreCard(userInput, computerCircle, winner) {
            let scoreCard = {};
            scoreCard["Player"] = userInput;
            scoreCard["Computer"] = computerCircle;
            if (winner !== "") {
                scoreCard["Winner"] = winner;
            }
            else {
                scoreCard["Winner"] = "Draw";
            }

            scoreCardArray.push(scoreCard);
            
        }

        function calculateScore(scoreCardArray) {

            for (let i = 0; i < scoreCardArray.length; i++) {
                if (scoreCardArray[i]["Winner"] === "Player") playerScore++;
                else if (scoreCardArray[i]["Winner"] === "Computer") computerScore++;
                else drawScore++;
            }
        }


        // Audio

        function playClickSound() {
            clickSound.currentTime = 0.04;
            clickSound.play();
        }

        function playGameMusic() {
            gameMusic = document.getElementById("gameMusic");
            gameMusic.volume = 0.4;
            // gameMusic.currentTime = 127;
            gameMusic.play();
            gameMusic.addEventListener("ended", () => { gameMusic.play() });
        }

        // pauseMenu

        function addPauseMenu() {
            document.body.appendChild(pauseMenu);
        }
        function removePauseMenu() {
            document.body.removeChild(pauseMenu);
        }

        // Music manipulation

        function musicVolumeChange() {
            musicSlider.value = (musicSlider.value != 0) ? 0 : 1;
            gameMusic.volume = musicSlider.value;
        }

        function sfxVolumeChange() {
            sfxSlider.value = (sfxSlider.value != 0) ? 0 : 1;
            clickSound.volume = sfxSlider.value;
        }

        //animation

        function resumeTextAddAnimation() {
            var x = document.createElement("p");
            x.textContent = "Resume";
            x.style.display = "inline-block";
            x.id = "resumeText";
            playButtonSection.appendChild(x);
        }

        function resumeTextRemoveAnimation() {
            var resumeTextElement = document.getElementById("resumeText");
            playButtonSection.removeChild(resumeTextElement);
        }

    </script>
</body>

</html>
